<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>借阅记录管理</title>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <style>
    .status-0 { background: #fff3cd; } /* 待审批 */
    .status-1 { background: #d4edda; } /* 已通过 */
    .status-2 { background: #f8d7da; } /* 已拒绝 */
    .status-3 { background: #cce5ff; } /* 归还申请中 */
    .status-4 { background: #e2e3e5; } /* 已归还 */
  </style>
</head>
<body>
<table class="table table-hover">
  <thead class="thead-dark">
  <tr>
    <th>读者</th>
    <th>书籍封面</th>
    <th>书籍名称</th>
    <th>类别</th>
    <th>借阅时间</th>
    <th>状态</th>
    <th>操作</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="item : ${list}" th:class="'status-' + ${item.status}">
    <td th:text="${item.userName}"></td>
    <td>
      <img th:if="${item.imagePath}"
           th:src="@{'/static/images/' + ${item.imagePath}}"
           style="max-width:60px;max-height:80px;">
    </td>
    <td th:text="${item.bookName}"></td>
    <td th:text="${item.sortName}"></td>
    <td th:text="${#dates.format(item.startTime, 'yyyy-MM-dd HH:mm')}"></td>
    <td>
                <span th:switch="${item.status}">
                    <span th:case="0" class="badge badge-warning">待审批</span>
                    <span th:case="1" class="badge badge-success">已通过</span>
                    <span th:case="2" class="badge badge-danger">已拒绝</span>
                    <span th:case="3" class="badge badge-info">归还申请中</span>
                    <span th:case="4" class="badge badge-secondary">已归还</span>
                </span>
    </td>
    <td>
      <a th:if="${item.status == 1}"
         th:href="@{/back/allow(id=${item.id})}"
         class="btn btn-sm btn-success">确认归还</a>
      <a th:if="${item.status == 0}"
         th:href="@{/admin/notAllow(id=${item.id})}"
         class="btn btn-sm btn-danger">取消借阅</a>
    </td>
  </tr>
  </tbody>
</table>
</body>
</html>
